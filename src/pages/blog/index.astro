---
import BlogPostPreview from "@/components/BlogPostPreview.astro";
import BaseLayout from "@/layouts/BaseLayout.astro";
import Header from "@/components/Header.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("posts", ({ data }) => !data.draft);

const sortedPosts = posts.sort((a, b) => {
  return b.data.publishDate.getTime() - a.data.publishDate.getTime();
});

let title = "pavi2410's blog - Web Development, Programming & Technology";
let description =
  "I occasionally write about web, android, programming, performance optimization, and other technology topics that I find interesting.";
let permalink = "/blog/";
let keywords =
  "blog, web, android, programming, technology, performance, pavi2410, Pavitra Golchha";
---

<BaseLayout
  title={title}
  description={description}
  permalink={permalink}
  keywords={keywords}
>
  <Header />
  <div class="container mx-auto max-w-prose space-y-8 mt-28 mb-16">
    <h1
      class="max-md:px-4 text-5xl leading-normal font-extrabold bg-clip-text text-transparent bg-linear-to-r from-indigo-500 via-purple-500 to-pink-500"
    >
      pavi2410's blog
    </h1>
    <section>
      <p class="max-md:px-4 text-xl">{description}</p>
    </section>
    <section aria-label="Blog post list" class="divide-y divide-neutral-500/50">
      {sortedPosts.map((p) => <BlogPostPreview post={p} />)}
    </section>
  </div>
</BaseLayout>
