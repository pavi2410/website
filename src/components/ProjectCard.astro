---
import { pickColorSchemeByStringHash } from "@/util";
import Tag from "./Tag.astro";
import { Icon } from "astro-icon/components";

const {
  project: { icon, title, description, url, techStack },
  index = 0,
} = Astro.props;

// Add some random rotation to cards for a playful look
const rotations = ['-rotate-2', 'rotate-1', '-rotate-1', 'rotate-2', 'rotate-0'];
const randomRotation = rotations[index % rotations.length];
---

<a
  href={url}
  target="_blank"  
  rel="noopener noreferrer"
  class={`group relative block h-full ${randomRotation} hover:rotate-0 transition-all duration-300`}
>
  <!-- Card Shadow/Background -->
  <div class="absolute inset-0 bg-neutral-900 dark:bg-neutral-800 rounded-3xl translate-x-2 translate-y-2 group-hover:translate-x-3 group-hover:translate-y-3 transition-transform duration-300"></div>
  
  <!-- Card Content -->
  <div class="relative h-full bg-white dark:bg-neutral-900 border-2 border-neutral-900 dark:border-neutral-700 rounded-3xl p-6 flex flex-col group-hover:-translate-y-1 group-hover:-translate-x-1 transition-transform duration-300">
    
    <div class="flex justify-between items-start mb-6">
      <div class="bg-neutral-100 dark:bg-neutral-800 p-3 rounded-2xl group-hover:scale-110 transition-transform duration-300">
        <img src={icon} alt={title} width="48" height="48" class="rounded-xl" />
      </div>
      <div class="text-neutral-400 group-hover:text-neutral-900 dark:group-hover:text-white transition-colors">
        <Icon name="tabler:arrow-up-right" class="text-2xl" />
      </div>
    </div>

    <h3 class="text-2xl font-bold font-bricolage text-neutral-900 dark:text-white mb-3 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
      {title}
    </h3>
    
    <p class="text-neutral-600 dark:text-neutral-400 grow leading-relaxed">
      {description}
    </p>

    {techStack && techStack.length > 0 && (
      <div class="flex flex-wrap gap-2 mt-6 pt-6 border-t-2 border-dashed border-neutral-200 dark:border-neutral-800">
        {techStack.map((tech: string) => (
          <span class="text-xs font-bold font-bricolage bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-300 px-3 py-1 rounded-full">
            {tech}
          </span>
        ))}
      </div>
    )}
  </div>
</a>
